(this.webpackJsonpgitspace=this.webpackJsonpgitspace||[]).push([[0],{207:function(e,t,n){e.exports=n(352)},212:function(e,t,n){},213:function(e,t,n){},352:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(188),i=n.n(s),o=(n(212),n(29)),c=n(30),l=n(32),u=n(31),h=n(33),m=(n(213),n(214),n(120)),d=n.n(m),p=n(189),f=n(83),g=n(190),b={axis:{tickColor:"#eee",ticks:{text:{fontSize:"1em",fontFamily:"PT Sans, serif",fontWeight:"bold"}},legend:{text:{fontSize:"1em",fontFamily:"PT Sans, serif",fontWeight:"bold",fill:"#165f77"}}}},v=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getAllBars=function(e){var t=n.props.data.length-e.length,a=n.props.data.slice(0,t),r=e[0],s=[],i=e[0].height,o=e.length>=2?e[0].y-e[1].y:64;return a.reverse(),a.forEach((function(e){s.push({key:e.repoName,data:{id:"size",value:e.size,index:20,indexValue:e.repoName,data:{repoName:e.repoName,size:e.size}},x:0,y:r.y+o,width:1,height:i,color:"#e8c1a0"}),r=s[s.length-1]})),s.reverse(),s.concat(e)},n.formatSize=function(e){return e<512?"".concat(e," KiB"):e<1048576?"".concat(Math.round(100*(e/1024+Number.EPSILON))/100," MiB"):"".concat(Math.round(100*(e/1048576+Number.EPSILON))/100," GiB")},n.LabelText=function(e){var t=e.bars;if(0===t.length)return r.a.createElement("g",null);var a=n.getAllBars(t),s=a.map((function(e,t){e.key,e.x;var s=e.y,i=e.width,o=e.height;return r.a.createElement("text",{textAnchor:"middle",x:i+50,y:s+o/2.1,style:{fontSize:"14px",fontFamily:"'Slabo 27px', serif"},key:t},n.formatSize(a[t].data.value))}));return r.a.createElement("g",null,s)},n.isOnSmallScreen=function(){return n.state.width<600},n.getChartMargin=function(){return{top:10,right:120,bottom:200,left:n.isOnSmallScreen()?100:200}},n.getChartDimension=function(){return{height:Math.max(700,70*n.props.repos.length),width:n.isOnSmallScreen()?n.state.width+200:n.state.width}},n.state={labelPosition:null,width:0,height:0},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(f.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){return r.a.createElement("div",{className:"wrap-chart"},r.a.createElement("div",{style:this.getChartDimension(),className:"bar-chart"},r.a.createElement(g.a,{data:this.props.data,keys:["size"],indexBy:"repoName",margin:this.getChartMargin(),padding:.1,layout:"horizontal",layers:["grid","axes","bars",this.LabelText,"markers","legends"],colors:{scheme:"nivo"},colorBy:"index",borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,enableLabel:!1,axisLeft:{tickRotation:this.isOnSmallScreen()?-60:0},axisBottom:{tickSize:10,tickPadding:5,tickRotation:this.isOnSmallScreen()?-50:0,legend:"MiB",legendPosition:"middle",legendOffset:70,format:function(e){return Math.round(e/1024+Number.EPSILON)}},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},animate:!0,motionStiffness:90,motionDamping:15,theme:b,tooltipFormat:function(e){return e+" KiB"}})))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleUsernameChange=function(e){n.setState({username:e.target.value})},n.initPageState=function(){n.responseData=[],n.fetchPage=1,n.fetchMore=!0,n.invalidUser=!1,n.noRepos=!1,n.unknownError=!1,n.success=!1},n.handleSubmit=function(e){n.setState({loading:!0,invalidUser:!1,noRepos:!1,unknownError:!1,sizeMessage:!1}),e.preventDefault(),n.fetchRepos().then((function(){0!==n.responseData.length?n.formatResponseData():n.setState({success:!1,sizeMessage:!1,invalidUser:n.invalidUser,unknownError:n.unknownError,noRepos:n.noRepos}),n.initPageState(),n.setState({loading:!1})}))},n.formatResponseData=function(){var e=[],t=[],a=0;n.responseData.forEach((function(n){t.push(n.name),a+=n.size;var r=n.size;e.push({repoName:n.name,size:r})})),e.sort((function(e,t){return e.size-t.size})),n.setState({chartData:e,repos:t,totalSize:Math.round(100*(a/1048576+Number.EPSILON))/100,success:!0,sizeMessage:!0,invalidUser:!1,unknownError:!1,noRepos:!1})},n.state={username:"",renderChart:!0,responseData:[],chartData:null,repos:null,loading:!1,success:!1,sizeMessage:!1,fetchPage:1,fetchMore:!0,invalidUser:!1,noRepos:!1,unknownError:!1,totalSize:0},n.initPageState(),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"fetchRepos",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fetchMore){e.next=2;break}return e.abrupt("return");case 2:return t="https://api.github.com/users/".concat(this.state.username,"/repos?per_page=100"),n="".concat(t,"&page=").concat(this.fetchPage),e.next=6,fetch(n);case 6:return a=e.sent,e.next=9,a.json();case 9:if(r=e.sent,404!==a.status){e.next=13;break}return this.invalidUser=!0,e.abrupt("return");case 13:if(200===a.status){e.next=18;break}return this.unknownError=!0,this.loading=!1,this.success=!1,e.abrupt("return");case 18:if(0!==r.length){e.next=24;break}return this.fetchMore=!1,this.loading=!1,this.success=!1,0===this.responseData.length&&(this.noRepos=!0),e.abrupt("return");case 24:return this.responseData=this.responseData.concat(r),this.fetchPage=this.fetchPage+1,e.next=28,this.fetchRepos();case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"username-input-form"},r.a.createElement("input",{type:"text",className:"username-input",placeholder:"Github Username",value:this.state.username,onChange:this.handleUsernameChange})),this.state.loading?r.a.createElement("div",{className:"spinner-border",role:"status"}):null,this.state.invalidUser?r.a.createElement("div",{className:"alert alert-warning message",role:"alert"},"You sure that's a Github username?"):null,this.state.noRepos?r.a.createElement("div",{className:"alert alert-warning message",role:"alert"},"This person doesn't seems to have any repositories, what are you trying to see the space for?"):null,this.state.unknownError?r.a.createElement("div",{className:"alert alert-danger message",role:"alert"},"Something went wrong!"):null,this.state.sizeMessage?r.a.createElement("div",{className:"alert alert-info message"},"Total space occupied: ",this.state.totalSize," GiB"):null,this.state.success?r.a.createElement(v,{data:this.state.chartData,repos:this.state.repos}):null)}}]),t}(a.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Source code at ",r.a.createElement("a",{className:"footer-text",href:"https://github.com/aktech/gitspace"},"Github")," \u2022 Made by ",r.a.createElement("a",{className:"footer-text",href:"https://iamit.in/"},"Amit")))}}]),t}(a.Component),E=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"site-title"},"Gitspace"),r.a.createElement("h2",{className:"desc"},"Know the space occupied by your public repositories."),r.a.createElement(w,null),r.a.createElement(S,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.88278fd9.chunk.js.map